<main class="home-main">
  <div class="profile-container">
    <section class="profile-header">
      {{#unless isOwnProfile}}
        <form method="POST" action="{{#if isFollowing}}/unfollow/{{profileUser._id}}{{else}}/follow/{{profileUser._id}}{{/if}}" class="follow-form">
          <button class="btn" type="submit">
            {{#if isFollowing}}Unfollow{{else}}Follow{{/if}}
          </button>
        </form>
      {{/unless}}

      {{#if isOwnProfile}}
        <div class="edit-profile-btn">
          <a href="/edit-profile" class="btn">Edit Your Profile</a>
        </div>
      {{/if}}

      <img src="/profile-picture/{{profileUser._id}}" alt="Profile Picture" class="profile-img">

      <div class="profile-info">
        <h1 class="profile-name">{{profileUser.name}}</h1>
        <p class="profile-username">@{{profileUser.username}}</p>
        {{#if profileUser.bio}}
          <p class="profile-bio">{{profileUser.bio}}</p>
        {{/if}}
        <div class="follow-stats">
          <p><strong><a href="/{{profileUser.username}}/followers">{{profileUser.followers.length}} Followers</a></strong></p>
          <p><strong><a href="/{{profileUser.username}}/following">{{profileUser.following.length}} Following</a></strong></p>
        </div>
        {{#if profileUser.link}}
          <a href="{{profileUser.link}}">{{profileUser.link}}</a>
        {{/if}}
      </div>
    </section>

    <section class="user-posts-section">
      <h2 class="section-title">Posts</h2>

      {{#if assignments.length}}
        <ul class="posts-list">
          {{#each assignments}}
            <li class="post-item">
              <a href="/assignments/{{this._id}}" class="post-link">
                <h3>{{this.title}}</h3>
                <p>{{this.description}}</p>
              </a>
            </li>
          {{/each}}
        </ul>
      {{else}}
        <p class="no-posts">This user hasn't made any posts yet.</p>
      {{/if}}
    </section>
  </div>
</main>
